<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>

        h1
        {

            /*background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"> <circle cx="100" cy="50" r="40" stroke="black" stroke-width="2" fill="red"/></svg>');*/
            background-repeat: no-repeat;
        }

    </style>
</head>
<body>

<h1 id="test">CSS</h1>
<!--<svg id="svg"><circle id="mysvg" cx="100" cy="50" r="40" stroke="black" stroke-width="2" fill="red"></circle></svg>-->
<script>

    function createGrid(x,width=20,height=40){
        let root=createElementByTag("svg","root");
        let svg=createElementByTag("svg",'svg');
        svg.setAttribute("xmlns","http://www.w3.org/2000/svg")
        // let domOperator=new DomOperator();
        // let svg=document.getElementById(this.svgId);
        // let img=createElementByTag("svg","img");
        let attrs={}
        // let attrs=domOperator.getAttrById(this.svgId,attrs_need);
        // console.log(attrs);
        if(width!==-1&&height!==-1){
            attrs['height']=height;
            attrs['width']=width;
        }
        // console.log(attrs)
        let heightNum=attrs['height']/x;
        let widthNum=attrs['width']/x;
        // console.log(heightNum,widthNum);
        let style="stroke:#DCDCDC;stroke-width:2"
        let style_normal="stroke:rgb(246,246,246);stroke-width:1"
        // for(var i=1;i<=heightNum;i++){
        //     let lineId='line_y_'+i;
        //     let node=createElementByTag("line","line_"+i);
        //     node.setAttribute("x1",0);
        //     node.setAttribute("y1",i*x);
        //     node.setAttribute("x2",attrs['width']);
        //     node.setAttribute("y2",i*x);
        //     // node.setAttribute("x1",0);
        //     node.setAttribute("style",style);
        //     // domOperator.setAttrByDom(node,nodeAttrs);
        //     // this.grid.push(lineId);
        //     // domOperator.appendChildByDom(svg,node);
        //     svg.append(node);
        // }

        // for(var i=1;i<=widthNum;i++){
        //     let lineId='line_x_'+i;
        //     let node=createElementByTag("line");
        //     let nodeAttrs={
        //         x1:i*x,
        //         y1:0,
        //         x2:i*x,
        //         y2:attrs['height'],
        //         id:lineId,
        //         style:i%4===0?style:style_normal
        //     }
        //     // domOperator.setAttrByDom(node,nodeAttrs);
        //     // this.grid.push(lineId);
        //     // console.log(node);
        //     // domOperator.appendChildByDom(svg,node);
        //     svg.append(node);
        //     // svg.append(node);
        // }
        // var html = '<svg xmlns="http://www.w3.org/2000/svg" id="source">'
        //       +img.innerHTML;
        //         +'</svg>';
        // // var html =img.innerHTML;
        // let image="url:\"("+'data:image/svg+xml;base64,' + window.btoa(html)+")";
        // console.log(image);
        // document.getElementById("mySvg").style.backgroundImage=image;
        // var string=img
        // console.log(img);

        let node=createElementByTag("rect","mysvg");
        node.setAttribute("x",0)
        node.setAttribute("y",0)
        node.setAttribute("width",2)
        node.setAttribute("height",100)
        // node.setAttribute("stroke","black")
        // node.setAttribute("stroke-width",2);
        node.setAttribute("fill","red");

        let node1=createElementByTag("circle","msvg");
        node1.setAttribute("cx",10)
        node1.setAttribute("cy",50)
        node1.setAttribute("r",40)
        node1.setAttribute("stroke","black")
        node1.setAttribute("stroke-width",2);
        node1.setAttribute("fill","red");

        svg.append(node);
        svg.append(node1);
        root.append(svg);
        var string =root.innerHTML;
        document.getElementById("test").setAttribute("style","background-image:url('data:image/svg+xml,"+string+"')");

    }

    createGrid(20);

    function createElementByTag(tag,id=""){
        let node=document.createElementNS(
            "http://www.w3.org/2000/svg",
            tag
        )
        if(id!==""){
            node.setAttribute("id",id);
        }
        return node;
    }
    // let root=createElementByTag("svg","root");
    // let svg=createElementByTag("svg",'svg');
    // svg.setAttribute("xmlns","http://www.w3.org/2000/svg")
    // let node=createElementByTag("circle","mysvg");
    // node.setAttribute("cx",100)
    // node.setAttribute("cy",50)
    // node.setAttribute("r",40)
    // node.setAttribute("stroke","black")
    // node.setAttribute("stroke-width",2);
    // node.setAttribute("fill","red");
    // svg.append(node);
    // root.append(svg);
    //
    // console.log(root.innerHTML);
    // var string =root.innerHTML;

    // var string="<svg xmlns=\"http://www.w3.org/2000/svg\"> <circle cx=\"100\" cy=\"50\" r=\"40\" stroke=\"black\" stroke-width=\"2\" fill=\"red\"/></svg>";
</script>
<!--url('data:image/svg+xml,<svg id="svg" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="20" x2="20" y2="20" style="stroke:#DCDCDC;stroke-width:1"></line></svg>')-->
<!--url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"> <circle cx="100" cy="50" r="40" stroke="black" stroke-width="2" fill="red"/></svg>')-->
</body>
</html>